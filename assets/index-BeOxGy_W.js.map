{"version":3,"file":"index-BeOxGy_W.js","sources":["../../src/constants.js","../../src/mapGenerator.js","../../src/audioEngine.js","../../src/main.js"],"sourcesContent":["export const CONSTANTS = {\n    LANES: ['D', 'F', 'J', 'K'],\n    HIT_ZONE_PERCENT: 0.8,\n    NOTE_SPEED: 0.65,\n    WINDOW_PERFECT: 100,\n    WINDOW_GOOD: 180\n};\n\nexport const DIFFICULTY_CONFIG = {\n    EASY: { threshold: 0.35, goldThreshold: 0.6, mineChance: 0.0, minInterval: 0.50 },\n    NORMAL: { threshold: 0.28, goldThreshold: 0.5, mineChance: 0.05, minInterval: 0.35 },\n    HARD: { threshold: 0.18, goldThreshold: 0.4, mineChance: 0.1, minInterval: 0.18 }\n};\n\nexport const ICONS = {\n    play: '<svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polygon points=\"5 3 19 12 5 21 5 3\"></polygon></svg>',\n    pause: '<svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><rect x=\"6\" y=\"4\" width=\"4\" height=\"16\"></rect><rect x=\"14\" y=\"4\" width=\"4\" height=\"16\"></rect></svg>'\n};","import { DIFFICULTY_CONFIG } from \"./constants\";\n\nexport class MapGenerator {\n    static generate(buffer, difficulty = 'NORMAL') {\n        const rawData = buffer.getChannelData(0);\n        const sampleRate = buffer.sampleRate;\n        const config = DIFFICULTY_CONFIG[difficulty];\n        const notes = [];\n        let lastNoteTime = 0;\n\n        for (let i = 0; i < rawData.length; i += 1024) {\n            const time = i / sampleRate;\n            const amplitude = Math.abs(rawData[i]);\n\n            if (amplitude > config.threshold && (time - lastNoteTime) > config.minInterval) {\n                const lane = Math.floor(Math.random() * 4);\n                const isGold = amplitude > config.goldThreshold;\n                const isDouble = amplitude > config.goldThreshold + 0.15;\n                const isHold = Math.random() > 0.8 && !isDouble;\n\n                notes.push({\n                    id: crypto.randomUUID(),\n                    time: time * 1000,\n                    lane,\n                    type: isHold ? 'hold' : (isGold ? 'gold' : 'normal'),\n                    duration: isHold ? Math.random() * 400 + 200 : 0,\n                    hit: false, missed: false, holding: false\n                });\n\n                if (isDouble && !isHold) {\n                    notes.push({\n                        id: crypto.randomUUID(),\n                        time: time * 1000,\n                        lane: (lane + Math.floor(Math.random() * 3) + 1) % 4,\n                        type: 'normal',\n                        duration: 0,\n                        hit: false, missed: false, holding: false\n                    });\n                }\n                lastNoteTime = time;\n            } else if (Math.random() < (config.mineChance / 50) && (time - lastNoteTime) > 0.2) {\n                notes.push({\n                    id: crypto.randomUUID(),\n                    time: time * 1000,\n                    lane: Math.floor(Math.random() * 4),\n                    type: 'mine',\n                    duration: 0,\n                    hit: false, missed: false, holding: false\n                });\n            }\n        }\n        return notes.sort((a,b) => a.time - b.time);\n    }\n}","export class AudioEngine {\n    constructor() {\n        this.ctx = null;\n        this.buffer = null;\n        this.source = null;\n        this.analyzer = null;\n        this.isSetup = false;\n    }\n\n    init() {\n        const AudioContext = window.AudioContext || window.webkitAudioContext;\n        this.ctx = new AudioContext();\n        this.analyzer = this.ctx.createAnalyser();\n        this.analyzer.fftSize = 256;\n        this.analyzer.smoothingTimeConstant = 0.8;\n        this.isSetup = true;\n    }\n\n    async loadFile(file) {\n        if (!this.isSetup) this.init();\n        const arrayBuffer = await file.arrayBuffer();\n        this.buffer = await this.ctx.decodeAudioData(arrayBuffer);\n        return this.buffer;\n    }\n\n    play(onEnded) {\n        if (this.ctx.state === 'suspended') this.ctx.resume();\n        this.source = this.ctx.createBufferSource();\n        this.source.buffer = this.buffer;\n        this.source.connect(this.analyzer);\n        this.analyzer.connect(this.ctx.destination);\n        this.source.onended = onEnded;\n        this.source.start(0);\n        return this.ctx.currentTime;\n    }\n\n    pause() { if (this.ctx) this.ctx.suspend(); }\n    resume() { if (this.ctx) this.ctx.resume(); }\n    stop() {\n        if (this.source) {\n            try { this.source.stop(); } catch(e) {}\n            this.source.disconnect();\n        }\n    }\n\n    getAnalysis() {\n        if (!this.analyzer) return { bass: 0, mids: 0, highs: 0, freqData: [] };\n        const freqData = new Uint8Array(this.analyzer.frequencyBinCount);\n        this.analyzer.getByteFrequencyData(freqData);\n        return {\n            freqData,\n            bass: freqData.slice(0, 4).reduce((a,b)=>a+b,0) / 4 / 255,\n            mids: freqData.slice(10, 20).reduce((a,b)=>a+b,0) / 10 / 255,\n            highs: freqData.slice(40, 60).reduce((a,b)=>a+b,0) / 20 / 255\n        };\n    }\n}","import { MapGenerator } from \"./mapGenerator\";\nimport { AudioEngine } from \"./audioEngine\";\nimport { CONSTANTS, ICONS } from \"./constants\";\n\nconst audio = new AudioEngine();\nlet gameState = {\n    screen: 'menu', // menu, playing, results\n    paused: false,\n    difficulty: 'NORMAL',\n    theme: { primary: '#22d3ee', secondary: '#c084fc', accent: '#f43f5e', bg: '#050010' },\n    score: 0,\n    combo: 0,\n    maxCombo: 0,\n    health: 100,\n    notes: [],\n    particles: [],\n    startTime: 0,\n    pauseTime: 0,\n    totalPauseDuration: 0,\n    activeKeys: new Set(),\n    audioFile: null\n};\n\nlet animationFrame;\nlet canvas, ctx;\n\n// --- 4. HELPERS ---\n\nconst generateBackupTheme = (filename) => {\n    let hash = 0;\n    for (let i = 0; i < filename.length; i++) hash = filename.charCodeAt(i) + ((hash << 5) - hash);\n    const c1 = Math.abs(hash % 360);\n    return {\n        primary: `hsl(${c1}, 80%, 60%)`,\n        secondary: `hsl(${(c1 + 40) % 360}, 70%, 50%)`,\n        accent: `hsl(${(c1 + 180) % 360}, 90%, 60%)`,\n        bg: `hsl(${c1}, 60%, 5%)`\n    };\n};\n\nconst createExplosion = (x, y, color, type = 'normal') => {\n    const count = type === 'gold' ? 20 : type === 'mine' ? 30 : 12;\n    const speed = type === 'gold' ? 8 : type === 'mine' ? 10 : 5;\n    for (let i = 0; i < count; i++) {\n        const angle = (Math.PI * 2 * i) / count;\n        gameState.particles.push({\n            x, y,\n            vx: Math.cos(angle) * (Math.random() * speed + 2),\n            vy: Math.sin(angle) * (Math.random() * speed + 2),\n            life: 1.0,\n            color: type === 'gold' ? '#FFD700' : type === 'mine' ? '#ff0000' : color,\n            type\n        });\n    }\n};\n\nconst showJudgment = (text, color, subtext) => {\n    const container = document.getElementById('judgment-container');\n    const el = document.createElement('div');\n    el.className = 'absolute text-center bounce-text';\n    el.innerHTML = `\n        <h2 class=\"text-6xl font-black italic\" style=\"color: ${color}; text-shadow: 0 0 20px ${color}\">${text}</h2>\n        <p class=\"text-xs font-bold uppercase tracking-[1em] mt-2 text-white animate-pulse\">${subtext}</p>\n    `;\n    container.appendChild(el);\n    setTimeout(() => el.remove(), 600);\n};\n\n// --- 5. DOM & GAME LOGIC ---\n\nfunction init() {\n    canvas = document.getElementById('game-canvas');\n    ctx = canvas.getContext('2d');\n    resizeCanvas();\n    window.addEventListener('resize', resizeCanvas);\n    \n    setupDifficultyButtons();\n    \n    // Event Listeners\n    document.getElementById('audio-input').addEventListener('change', handleFileUpload);\n    document.getElementById('btn-start').addEventListener('click', startGame);\n    document.getElementById('btn-back').addEventListener('click', resetMenu);\n    document.getElementById('btn-pause-header').addEventListener('click', togglePause);\n    document.getElementById('btn-resume').addEventListener('click', togglePause);\n    document.getElementById('btn-quit').addEventListener('click', quitGame);\n    document.getElementById('btn-menu-return').addEventListener('click', quitGame); // Reuse quit logic\n    document.getElementById('btn-retry').addEventListener('click', startGame);\n    \n    window.addEventListener('keydown', handleKey);\n    window.addEventListener('keyup', handleKey);\n\n    // Mobile Touch\n    canvas.addEventListener('touchstart', handleTouch, {passive: false});\n    \n    updateDOM();\n}\n\nfunction resizeCanvas() {\n    canvas.width = canvas.parentElement.clientWidth;\n    canvas.height = canvas.parentElement.clientHeight;\n}\n\nfunction setupDifficultyButtons() {\n    const container = document.getElementById('difficulty-selector');\n    container.innerHTML = '';\n    ['EASY', 'NORMAL', 'HARD'].forEach(level => {\n        const btn = document.createElement('button');\n        btn.className = `py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${gameState.difficulty === level ? 'bg-white text-black' : 'bg-white/5 text-white/40'}`;\n        btn.innerText = level;\n        btn.onclick = () => {\n            gameState.difficulty = level;\n            // Re-generate notes if song is loaded\n            if(audio.buffer) {\n                gameState.notes = MapGenerator.generate(audio.buffer, level);\n                document.getElementById('note-count').innerText = `${gameState.notes.length} NOTES READY`;\n            }\n            setupDifficultyButtons(); // redraw state\n        };\n        container.appendChild(btn);\n    });\n}\n\nasync function handleFileUpload(e) {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    document.getElementById('loading-text').classList.remove('hidden');\n    gameState.audioFile = file.name;\n    gameState.theme = generateBackupTheme(file.name);\n    \n    // Apply theme to CSS\n    document.getElementById('bg-layer').style.backgroundColor = gameState.theme.bg;\n    document.documentElement.style.setProperty('--primary', gameState.theme.primary);\n\n    const buffer = await audio.loadFile(file);\n    gameState.notes = MapGenerator.generate(buffer, gameState.difficulty);\n    \n    // Switch Menu View\n    document.getElementById('upload-area').classList.add('hidden');\n    document.getElementById('ready-area').classList.remove('hidden');\n    document.getElementById('song-name').innerText = file.name;\n    document.getElementById('note-count').innerText = `${gameState.notes.length} NOTES READY`;\n    \n    // Update icon color\n    document.getElementById('ready-icon-container').style.borderColor = gameState.theme.primary;\n    document.getElementById('ready-icon-container').style.color = gameState.theme.primary;\n}\n\nfunction resetMenu() {\n    document.getElementById('upload-area').classList.remove('hidden');\n    document.getElementById('loading-text').classList.add('hidden');\n    document.getElementById('ready-area').classList.add('hidden');\n    document.getElementById('audio-input').value = '';\n}\n\nfunction switchScreen(screen) {\n    gameState.screen = screen;\n    ['screen-menu', 'screen-playing', 'screen-results'].forEach(id => {\n        document.getElementById(id).classList.add('hidden');\n    });\n    document.getElementById(`screen-${screen}`).classList.remove('hidden');\n    \n    const headerBtn = document.getElementById('btn-pause-header');\n    if(screen === 'playing') headerBtn.classList.remove('hidden');\n    else headerBtn.classList.add('hidden');\n}\n\nfunction startGame() {\n    gameState.score = 0;\n    gameState.combo = 0;\n    gameState.maxCombo = 0;\n    gameState.health = 100;\n    gameState.particles = [];\n    gameState.paused = false;\n    gameState.totalPauseDuration = 0;\n    gameState.notes.forEach(n => { n.hit = false; n.missed = false; n.holding = false; }); // Reset notes\n\n    switchScreen('playing');\n    updateHUD();\n    resizeCanvas();\n\n    gameState.startTime = performance.now();\n    audio.play(() => showResults());\n    \n    // Theme update for HUD\n    document.getElementById('app-title').style.backgroundImage = `linear-gradient(to right, ${gameState.theme.primary}, ${gameState.theme.secondary})`;\n    document.getElementById('btn-pause-header').innerHTML = ICONS.pause;\n\n    gameLoop();\n}\n\nfunction showResults() {\n    cancelAnimationFrame(animationFrame);\n    audio.stop();\n    switchScreen('results');\n    document.getElementById('result-score').innerText = gameState.score.toLocaleString();\n    document.getElementById('result-combo').innerText = gameState.maxCombo;\n    document.getElementById('result-combo').style.color = gameState.theme.primary;\n    \n    let rank = 'F';\n    if(gameState.health > 80) rank = 'S';\n    else if(gameState.health > 60) rank = 'A';\n    else if(gameState.health > 40) rank = 'B';\n    else if(gameState.health > 0) rank = 'C';\n    \n    document.getElementById('result-rank').innerText = rank;\n}\n\nfunction togglePause() {\n    if(gameState.screen !== 'playing') return;\n\n    gameState.paused = !gameState.paused;\n    const overlay = document.getElementById('overlay-pause');\n    const btn = document.getElementById('btn-pause-header');\n\n    if (gameState.paused) {\n        audio.pause();\n        gameState.pauseTime = performance.now();\n        cancelAnimationFrame(animationFrame);\n        overlay.classList.remove('hidden');\n        btn.innerHTML = ICONS.play;\n    } else {\n        audio.resume();\n        gameState.totalPauseDuration += performance.now() - gameState.pauseTime;\n        overlay.classList.add('hidden');\n        btn.innerHTML = ICONS.pause;\n        gameLoop();\n    }\n}\n\nfunction quitGame() {\n    audio.stop();\n    cancelAnimationFrame(animationFrame);\n    switchScreen('menu');\n}\n\nfunction updateHUD() {\n    // Desktop\n    document.getElementById('hud-score').innerText = gameState.score.toLocaleString();\n    document.getElementById('hud-combo').innerText = gameState.combo;\n    document.getElementById('hud-combo').style.color = gameState.combo > 0 ? gameState.theme.primary : 'rgba(255,255,255,0.2)';\n    \n    const healthBar = document.getElementById('hud-health');\n    healthBar.style.width = `${gameState.health}%`;\n    healthBar.className = `h-full transition-all duration-300 w-full ${gameState.health < 30 ? 'bg-red-500' : 'bg-green-400'}`;\n\n    // Mobile\n    document.getElementById('hud-score-mobile').innerText = gameState.score.toLocaleString();\n    document.getElementById('hud-combo-mobile').innerText = gameState.combo;\n    document.getElementById('hud-combo-mobile').style.color = gameState.combo > 0 ? gameState.theme.primary : 'white';\n    document.getElementById('hud-health-mobile').style.width = `${gameState.health}%`;\n    document.getElementById('hud-health-mobile').className = `h-full ${gameState.health < 30 ? 'bg-red-500' : 'bg-green-400'}`;\n}\n\nfunction updateDOM() {\n    // Generally handled by events, but initial setup here\n}\n\n// --- 6. INPUT HANDLING ---\n\nfunction handleKey(e) {\n    if (gameState.screen !== 'playing' || gameState.paused) {\n        if (e.key === 'Escape') togglePause();\n        return;\n    }\n    \n    const laneMap = { 'd': 0, 'f': 1, 'j': 2, 'k': 3 };\n    const lane = laneMap[e.key.toLowerCase()];\n    if (lane === undefined) return;\n\n    if (e.type === 'keydown' && !gameState.activeKeys.has(lane)) {\n        gameState.activeKeys.add(lane);\n        processHit(lane);\n    } else if (e.type === 'keyup') {\n        gameState.activeKeys.delete(lane);\n    }\n}\n\nfunction handleTouch(e) {\n    if (gameState.screen !== 'playing' || gameState.paused) return;\n    e.preventDefault();\n    \n    const w = canvas.width;\n    const laneWidth = w / 4;\n    const touches = Array.from(e.touches);\n    \n    const currentLanes = new Set();\n\n    touches.forEach(t => {\n        const rect = canvas.getBoundingClientRect();\n        const x = t.clientX - rect.left;\n        const lane = Math.floor(x / laneWidth);\n        if (lane >= 0 && lane <= 3) currentLanes.add(lane);\n    });\n\n    // Trigger presses for new touches\n    currentLanes.forEach(lane => {\n        if (!gameState.activeKeys.has(lane)) {\n            processHit(lane);\n        }\n    });\n\n    gameState.activeKeys = currentLanes;\n}\n\nfunction processHit(lane) {\n    const elapsed = performance.now() - gameState.startTime - gameState.totalPauseDuration;\n    const note = gameState.notes.find(n => \n        !n.hit && !n.missed && n.lane === lane && Math.abs(n.time - elapsed) < CONSTANTS.WINDOW_GOOD\n    );\n\n    if (note) {\n        if (note.type === 'mine') {\n            note.hit = true;\n            gameState.combo = 0;\n            gameState.health = Math.max(0, gameState.health - 20);\n            showJudgment('OUCH!', '#f00', 'Mine!');\n            createExplosion(0, 0, '#f00', 'mine');\n        } else {\n            const diff = Math.abs(note.time - elapsed);\n            \n            // Visual calcs\n            const w = canvas.width;\n            const h = canvas.height;\n            const laneWidth = w / 4;\n            const x = lane * laneWidth + laneWidth/2;\n            const y = h * CONSTANTS.HIT_ZONE_PERCENT;\n            const isInner = lane === 1 || lane === 2;\n            let color = isInner ? gameState.theme.primary : gameState.theme.secondary;\n            if (note.type === 'gold') color = '#FFD700';\n\n            createExplosion(x, y, color, note.type);\n\n            note.hit = true;\n\n            // Scoring\n            let points = note.type === 'gold' ? 300 : 100;\n            if (diff < CONSTANTS.WINDOW_PERFECT) {\n                gameState.score += points * 2 + gameState.combo * 10;\n                showJudgment(note.type === 'gold' ? 'JACKPOT!' : 'PERFECT', '#fff', 'Pure!');\n            } else {\n                gameState.score += points + gameState.combo * 5;\n                showJudgment('GOOD', color, 'Hit');\n            }\n            gameState.combo++;\n            if(gameState.combo > gameState.maxCombo) gameState.maxCombo = gameState.combo;\n        }\n        updateHUD();\n    }\n}\n\n// --- 7. GAME LOOP ---\n\nfunction gameLoop() {\n    if (gameState.paused) return;\n\n    const w = canvas.width;\n    const h = canvas.height;\n    const time = performance.now();\n    const elapsed = time - gameState.startTime - gameState.totalPauseDuration;\n    const { bass, mids, freqData } = audio.getAnalysis();\n\n    // Background\n    const bgGrad = ctx.createLinearGradient(0, 0, 0, h);\n    bgGrad.addColorStop(0, gameState.theme.bg);\n    bgGrad.addColorStop(1, '#000');\n    ctx.fillStyle = bgGrad;\n    ctx.fillRect(0, 0, w, h);\n\n    // Bass Pulse\n    ctx.fillStyle = gameState.theme.primary;\n    ctx.globalAlpha = bass * 0.2;\n    ctx.fillRect(0,0,w,h);\n    ctx.globalAlpha = 1.0;\n\n    // Visualizer Circle\n    const cx = w/2, cy = h/2;\n    const radius = Math.min(w,h) * 0.2 * (1 + bass * 0.2);\n    ctx.beginPath();\n    ctx.arc(cx, cy, radius, 0, Math.PI * 2);\n    ctx.fillStyle = gameState.theme.secondary;\n    ctx.fill();\n\n    // Frequency Bars\n    const bars = 40;\n    const step = (Math.PI*2)/bars;\n    ctx.strokeStyle = gameState.theme.primary;\n    ctx.lineWidth = 4;\n    for(let i=0; i<bars; i++){\n        const val = freqData[i] || 0;\n        const len = (val/255) * 100 * (0.5+bass);\n        const angle = i*step + (elapsed*0.0005);\n        ctx.beginPath();\n        ctx.moveTo(cx + Math.cos(angle)*radius, cy + Math.sin(angle)*radius);\n        ctx.lineTo(cx + Math.cos(angle)*(radius+len), cy + Math.sin(angle)*(radius+len));\n        ctx.stroke();\n    }\n\n    // Highway\n    const laneWidth = w/4;\n    const hitY = h * CONSTANTS.HIT_ZONE_PERCENT;\n    ctx.fillStyle = 'rgba(0,0,0,0.5)';\n    ctx.fillRect(0,0,w,h);\n\n    // Lane Flashes\n    gameState.activeKeys.forEach(lane => {\n        const lg = ctx.createLinearGradient(0,h,0,0);\n        lg.addColorStop(0, gameState.theme.primary);\n        lg.addColorStop(1, 'transparent');\n        ctx.fillStyle = lg;\n        ctx.globalAlpha = 0.3;\n        ctx.fillRect(lane * laneWidth, 0, laneWidth, h);\n        ctx.globalAlpha = 1.0;\n    });\n\n    // Hit Line\n    ctx.strokeStyle = 'white';\n    ctx.lineWidth = 2 + (bass * 6);\n    ctx.beginPath();\n    ctx.moveTo(0, hitY); ctx.lineTo(w, hitY);\n    ctx.stroke();\n\n    // Notes\n    gameState.notes.forEach(note => {\n        const pxPerMs = CONSTANTS.NOTE_SPEED * (h / 800);\n        const y = hitY - (note.time - elapsed) * pxPerMs;\n\n        // Miss Logic\n        if (y > h + 50 && !note.missed && !note.hit) {\n            if (note.type !== 'mine') {\n                note.missed = true;\n                gameState.combo = 0;\n                gameState.health = Math.max(0, gameState.health - 10);\n                showJudgment('MISS', '#888', '...');\n                updateHUD();\n            } else {\n                note.missed = true; // Safe pass\n            }\n        }\n\n        if (y > -100 && y < h + 50) {\n            const x = note.lane * laneWidth + laneWidth/2;\n            const isInner = note.lane === 1 || note.lane === 2;\n            let color = isInner ? gameState.theme.primary : gameState.theme.secondary;\n            if (note.type === 'gold') color = '#FFD700';\n            if (note.type === 'mine') color = '#f00';\n\n            const nw = laneWidth * 0.8;\n            const nh = h * 0.06;\n\n            ctx.fillStyle = note.missed && note.type !== 'mine' ? '#333' : color;\n\n            if (!note.hit || note.type === 'mine') {\n                ctx.shadowBlur = note.type === 'gold' ? 30 : 15;\n                ctx.shadowColor = color;\n                \n                ctx.beginPath();\n                if (note.type === 'gold') {\n                    ctx.moveTo(x, y - nh); ctx.lineTo(x + nw/2, y); ctx.lineTo(x, y + nh); ctx.lineTo(x - nw/2, y);\n                } else if (note.type === 'mine') {\n                    ctx.arc(x, y, nw/3, 0, Math.PI*2);\n                } else {\n                    ctx.roundRect(x - nw/2, y - nh/2, nw, nh, 8);\n                }\n                ctx.fill();\n                ctx.shadowBlur = 0;\n            }\n        }\n    });\n\n    // Particles\n    gameState.particles.forEach((p, i) => {\n        p.x += p.vx; p.y += p.vy; p.life -= 0.05;\n        ctx.globalAlpha = p.life;\n        ctx.fillStyle = p.color;\n        ctx.beginPath();\n        ctx.arc(p.x, p.y, p.type==='gold'?6:4, 0, Math.PI*2);\n        ctx.fill();\n        if(p.life <= 0) gameState.particles.splice(i, 1);\n    });\n    ctx.globalAlpha = 1.0;\n\n    if(gameState.health <= 0) {\n        showResults();\n    } else {\n        animationFrame = requestAnimationFrame(gameLoop);\n    }\n}\n\n// Initialize\nwindow.onload = init;\n\n"],"names":["CONSTANTS","DIFFICULTY_CONFIG","ICONS","MapGenerator","buffer","difficulty","rawData","sampleRate","config","notes","lastNoteTime","i","time","amplitude","lane","isGold","isDouble","isHold","a","b","AudioEngine","AudioContext","file","arrayBuffer","onEnded","freqData","audio","gameState","animationFrame","canvas","ctx","generateBackupTheme","filename","hash","c1","createExplosion","x","y","color","type","count","speed","angle","showJudgment","text","subtext","container","el","init","resizeCanvas","setupDifficultyButtons","handleFileUpload","startGame","resetMenu","togglePause","quitGame","handleKey","handleTouch","level","btn","e","switchScreen","screen","id","headerBtn","updateHUD","showResults","gameLoop","rank","overlay","healthBar","processHit","laneWidth","touches","currentLanes","t","rect","elapsed","note","n","diff","w","h","points","bass","mids","bgGrad","cx","cy","radius","bars","step","len","hitY","lg","pxPerMs","nw","nh","p"],"mappings":"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"}